# Fuzzy Search Server

## Overview
This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project.

The purpose of this server is to implement the concept of fuzzy search on a database of users in order to find / provide simalar results to search attempts.


## Requirements
Python 3.5.2+   
connexion 2.6.0+    
connexion[swagger-ui] 2.6.0+  
python_dateutil 2.6.0    
setuptools 21.0.0+    
swagger-ui-bundle 0.0.2+  
pymongo


## Usage
To run the server, execute the following from the root directory:

```
virtualenv venv
source venv/bin/activate

pip3 install -r requirements.txt
python3 -m swagger_server
```

Afterward, connect to a new mongo database, and insert the cluster url in **/swagger_server/db_config.json**, replacing the placeholder: ``{ "url" : "" }`` 


Once that step has been completed, run the script 'mongo_setup.py':

```
python3 mongo_setup.py
```

Finally, we can now run the microservice with the following command:

```
python3 -m swagger_server
```

## APIs

The implemented APIs are:
- GET   /api/users/
- GET   /api/users/{userID}
- POST  /api/users/newUser
- GET   /api/users/fuzzysearch

### API descriptions
GetAllUsers:    Gets all available users in the database

GetUserById:    Gets the specific user that corresponds to the given id.

PostUser:       Posts a new user to the database and internally inserts additional information.

SearchUsers:    Gets the users whose names have simalarities with the given search_string in order of most simalar to least simalar.

## Fuzzy Search

The way fuzzy search was implemented was using the Levenshtein Algorithm.

The search extracts all available entries in the database and compares each one to the given search string using their Levenshtein distance as a metric for simalarity.

The Levenshtein distance is simply the minimum number of single-character modifications from one string to the other; The possible modifications are:
- Insertion
- Deletion
- Single-Character Replacement

Using Dynamic Programming, a matrix is built and navigated until reaching the bottom-right corner where the Levenshtein distance will end up.

! ! The helper function is available in ``swagger_server/controllers/fuzzy.py``

#### For Example:

```
fuzzy.fuzzy_compare("Nohamad", "Mohammad")
```

Obtains the following result: ``` 2 ```

The corresponding computed distance matrix is:

```
[0, 1, 2, 3, 4, 5, 6, 7]    
[1, 1, 2, 3, 4, 5, 6, 7]    
[2, 2, 1, 2, 3, 4, 5, 6]    
[3, 3, 2, 1, 2, 3, 4, 5]    
[4, 4, 3, 2, 1, 2, 3, 4]    
[5, 5, 4, 3, 2, 1, 2, 3]    
[6, 6, 5, 4, 3, 2, 2, 3]    
[7, 7, 6, 5, 4, 3, 2, 3]    
[8, 8, 7, 6, 5, 4, 3, 2]
```


## OpenAPI
You may view the API user interface here:
```
http://localhost:8080/ui/
```

The Swagger definition:

```
http://localhost:8080/swagger.json
```

## Running with Docker

To run the server on a Docker container, please execute the following from the root directory:

```bash
# building the image
docker build -t swagger_server .

# starting up a container
docker run -p 8080:8080 swagger_server
```
